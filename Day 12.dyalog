a←⊃⎕NGET 'Day 12.txt' 1
n←⍎¨1↓¨a
d←+⌿0J1 0J¯1 1 ¯1 ×⍤0 1⊢'NSEW'∘.∊a
l←*○180÷⍨n×+⌿0J1 0J¯1×⍤0 1⊢'LR'∘.∊a

⍝ Part 1
+/|9 11○⊂+/n×d+(×\l)×'F'∊¨a

⍝ Part 2
w←(⊃⊣×⌽⍤+)/¨⌽¨1↓,⍥⊆\10J1,↓⍉↑l,⍥⊂n×d
+/|9 11○⊂+/n×w×'F'∊¨a
